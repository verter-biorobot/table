

Терминалы регулярно скидывают свое состояние (при наличии изменений в состоянии) на сервер путем http post-запроса. На сервере php скрипт обновляет состояние терминала в бд.
Также терминалы обращаются на специальную страницу для определения статуса (разрешена работа/терминал заблокирован), статус возвращается в теле страницы (берется из бд). Этот процесс регулярный, и используется для обновления состояния "alive" для терминала.
Есть ещё одна страница - настройки, к ней также определенным интервалом обращаются терминалы для обновления настроек.



Как могла бы работать система администрирования.
Имеем кучу терминалов и пользователей.
У пользователя может быть несколько терминалов.
Что хочет видеть пользователь:
	- состояние своих терминалов
	- подсчет выручки за период по группе терминалов
	
Доли.
С рабочего терминала можно получать следующими способами:
	- процент от выручки (может быть индивидуальным для разных пользователей)
	- повременная оплата (настраиваемый период и сумма)
	- то же что и повременная оплата, но учитывается реальное время работы терминала (без учета простоя в отключенном состоянии)
	- возможно гибрид предыдущих двух пунктов, как в такси, работает терминал - одна цена, простаивает - другая
	- обязательно появятся ещё какие-то варианты
Причем если главный юзер отдает дилеру например 10 терминалов по схеме оплаты - фикс. помесячно, то это не должно мешать ему перездавать терминалы по другой схеме, например на процент от выручки.

Иерарахия.
Имеем одного корневого пользователя (мастер), который может создавать терминалы и пользователей без ограничений.
Далее каждый пользователь может иметь возможность (или не иметь) создавать ограниченное кол-во терминалов. Для создаваемых им подпользователей, он может задавать разные схемы сбора выручки, а также разрешать им создавать своих подпользователей/терминалов.



Много спорных моментов выше, надо все обмусолить, чтобы получить красивое решение.



